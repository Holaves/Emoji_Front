(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[921],{1741:(e,s,a)=>{"use strict";a.d(s,{A:()=>m});var t=a(4848),i=a(6540),r=a(6715),o=a(265),d=a.n(o),l=a(5820),n=a(5368),_=a(1106),c=a.n(_),h=a(1658);let m=e=>{let{categories:s}=e,[a,o]=(0,i.useState)(!1),[_,m]=(0,i.useState)(!1),[C,g]=(0,i.useState)({dishes:[],isDelive:!1}),[x,p]=(0,i.useState)([]),{isAddCart:u}=(0,h.N)(e=>e.cart),[j,w]=(0,i.useState)(!1),[M,N]=(0,i.useState)(0);(0,i.useEffect)(()=>{M>0&&(w(!0),setTimeout(()=>{w(!1)},2e3)),N(M+1)},[u]);let k=(0,r.useRouter)(),v=s.slice(0,4),f=s.slice(4);return(0,t.jsx)("div",{className:d().CategoriesHeader,children:(0,t.jsx)(l.A,{styless:{display:"flex",alignContent:"center",justifyContent:"center"},children:(0,t.jsxs)("div",{className:d().CategoriesHeader_wrapper,children:[(0,t.jsxs)("div",{className:d().CategoriesHeaderBlock,children:[(0,t.jsx)("div",{className:d().logo_short,onClick:()=>k.push("/")}),(0,t.jsx)("ul",{className:d().CategoriesHeader_list,children:v.map((e,s)=>(0,t.jsx)("li",{className:d().CategoriesHeader_list_item,onClick:()=>k.push("/categories/".concat(e._id)),children:e.subName},s))}),(0,t.jsxs)("div",{className:d().MoreCategories_dropDown,onClick:()=>{m(!_)},children:[(0,t.jsx)("h4",{children:"Ещё"}),(0,t.jsx)("span",{className:"".concat(d().MoreCategories_dropDown_arrow," ").concat(_?d().open:"")}),_&&(0,t.jsx)("ul",{className:d().MoreCategories_list,children:f.map((e,s)=>(0,t.jsx)("li",{className:d().MoreCategories_list_item,onClick:()=>k.push("/categories/".concat(e._id)),children:e.subName},s))})]}),(0,t.jsx)("div",{className:d().header_dot}),(0,t.jsx)(c(),{className:d().text_hed,href:"/stocks",style:{textDecoration:"none"},children:"Акции"})]}),(0,t.jsx)("div",{className:j?d().Cart_button_withBefore:d().Cart_button,"data-counter":u,onClick:()=>{o(!a)},children:"Корзина"}),(0,t.jsx)(n.A,{dishes:C.dishes||[],isOpenModal:a})]})})})}},9773:(e,s,a)=>{"use strict";a.d(s,{A:()=>y});var t=a(4848),i=a(6540),r=a(6871),o=a(1849),d=a(6942),l=a.n(d),n=a(4623);let _=i.forwardRef((e,s)=>{let{bsPrefix:a,fluid:i=!1,as:r="div",className:o,...d}=e,_=(0,n.oU)(a,"container");return(0,t.jsx)(r,{ref:s,...d,className:l()(o,i?"".concat(_).concat("string"==typeof i?"-".concat(i):"-fluid"):_)})});_.displayName="Container";var c=a(4335),h=a(8811),m=a.n(h),C=a(8601),g=a(726),x=a(9421),p=a.n(x),u=a(9377),j=a(4619),w=a(1468),M=a(6078);let N=e=>({type:M.t.SET_COUNTER,payload:e});var k=a(1658);let v=e=>{let{item:s,onClose:a}=e,r=(0,w.wA)(),{isAddCart:o}=(0,k.N)(e=>e.cart),[d,l]=(0,i.useState)(1440),n=async()=>{let e=localStorage.getItem("jwtToken");if(console.log("JWT Token:",e),e)try{let t=await fetch("".concat(C.Jc,"/cart"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({DishId:s._id})});if(!t.ok)throw Error("Failed to add dish to cart");let i=await t.json();console.log("Dish added to cart:",i),a()}catch(e){console.error("Error adding dish to cart:",e)}else(0,j.bE)(s),console.log((0,j.Xl)()),a();r(N(o+1))};return(0,i.useEffect)(()=>{l(window.innerWidth),addEventListener("resize",e=>{l(window.innerWidth)})},[]),(0,t.jsxs)("div",{className:p().dishModal,children:[(0,t.jsx)("div",{className:p().dishModal_image,children:(0,t.jsx)("img",{src:"".concat(C.Jc,"/").concat(s.picture),alt:s.name})}),(0,t.jsxs)("div",{className:p().dishModal_main,children:[(0,t.jsxs)("div",{className:p().dishModal_main_title,children:[(0,t.jsx)("h4",{className:p().dishModal_main_subTitle,children:"Пицца"}),(0,t.jsx)("h1",{children:s.name})]}),(0,t.jsxs)("div",{className:p().dishModal_main_description,children:[(0,t.jsx)("h4",{className:p().dishModal_main_subTitle,children:"Описание"}),(0,t.jsx)("h2",{className:p().dishModal_main_text,children:s.description})]}),(0,t.jsxs)("div",{className:p().dishModal_main_weight,children:[(0,t.jsx)("h4",{className:p().dishModal_main_subTitle,children:"Вес"}),(0,t.jsx)("h2",{className:p().dishModal_main_text,children:s.weight})]}),(0,t.jsxs)(u.A,{state:u.m.active,width:420,height:d>1e3?68:d>500?48:40,fz:d>1440?"":d>1e3?"23px":d>500?"16px":"14px",styless:{marginTop:d>1440?"250px":d>1440?"50px":"20px",marginLeft:"auto",marginRight:"auto"},onClickBut:n,children:["В корзину за ",s.price," руб"]})]})]})},f=e=>{let{dish:s}=e,[a,r]=(0,i.useState)(!1),[o,d]=(0,i.useState)(1440),l=()=>r(!1);return(0,i.useEffect)(()=>{d(window.innerWidth),addEventListener("resize",e=>{d(window.innerWidth)})},[]),(0,t.jsxs)("div",{className:m().DishCard,children:[(0,t.jsxs)(g.A,{order:!0,isOpen:a,onClose:l,width:o>400?o-o/100*30:o,children:[(0,t.jsx)(v,{item:s,onClose:l})," "]}),(0,t.jsx)("div",{className:m().DishCard_imgBlock,children:(0,t.jsx)("img",{src:"".concat(C.Jc,"/").concat(s.picture),alt:s.name})}),(0,t.jsxs)("div",{className:m().titleBlock,children:[(0,t.jsx)("h2",{children:s.name}),s.weight?(0,t.jsxs)("h6",{children:[s.weight," грамм"]}):(0,t.jsx)(t.Fragment,{})]}),s.description.length>37?(0,t.jsxs)("h3",{children:[s.description.substring(0,41),".."]}):(0,t.jsx)("h3",{children:s.description.substring(0,41)}),(0,t.jsxs)("div",{className:m().CardFootBlock,children:[(0,t.jsxs)("div",{className:m().CardFootBlock__price,children:[s.price," руб"]}),(0,t.jsx)("span",{className:m().CardFootBlock__stick}),(0,t.jsx)("div",{className:m().CardFootBlock__button,onClick:()=>r(!0),children:"Выбрать"})]})]})};a(433);var D=a(1240),B=a(2910),H=a.n(B);let b=e=>{let{children:s,stylesCss:a}=e;return(0,t.jsx)("div",{className:H().Title,style:a,children:"string"==typeof s?s.split(/(\*[^*]+\*)/).map((e,s)=>e.startsWith("*")&&e.endsWith("*")?(0,t.jsx)("span",{className:H().orangeText,children:e.slice(1,-1)},s):e):s})},y=e=>{let{categoria:s,over:a}=e,[d,l]=(0,i.useState)([]),[n,h]=(0,i.useState)([]),[g,x]=(0,i.useState)(1e3);(0,i.useEffect)(()=>{x(window.innerWidth);let e=()=>x(window.innerWidth);window.addEventListener("resize",e);let t=async()=>{try{let e=await c.A.get("".concat(C.Jc,"/dishes/categories/").concat(s._id));l(e.data)}catch(e){console.error("Ошибка при получении данных:",e)}},i=async()=>{try{let e=await c.A.get("".concat(C.Jc,"/sets/"));h(e.data)}catch(e){console.error("Ошибка при получении данных:",e)}};return a&&i(),t(),()=>{window.removeEventListener("resize",e)}},[s._id,a]);let p=(e,s)=>{let a=[];for(let i=0;i<e.length;i+=s){let d=e.slice(i,i+s);for(;d.length<s;)d.push(null);a.push((0,t.jsx)("div",{className:m().rowBlock,children:(0,t.jsx)(r.A,{className:"mb-3",children:d.map((e,a)=>(0,t.jsx)(o.A,{md:12/s,children:e?(0,t.jsx)(f,{dish:e}):(0,t.jsx)("div",{className:m().placeholder})},a))})},i))}return a},u=g>1e3?3:2;return 0===d.length&&0===n.length?null:(0,t.jsxs)(D.A,{styless:{marginTop:"85px"},children:[(0,t.jsx)(b,{children:a?"Сеты":s.name}),(0,t.jsxs)(_,{fluid:!0,children:[p(d,u),a&&p(n,u)]})]})}},1658:(e,s,a)=>{"use strict";a.d(s,{N:()=>t});let t=a(1468).d4},433:()=>{},2910:e=>{e.exports={Title:"title_Title__iGHb5",orangeText:"title_orangeText__6mKIt"}},265:e=>{e.exports={CategoriesHeader:"CategoriesHeader_CategoriesHeader__Rb7k2",CategoriesHeader_wrapper:"CategoriesHeader_CategoriesHeader_wrapper___UIrG",CategoriesHeaderBlock:"CategoriesHeader_CategoriesHeaderBlock__kid4T",logo_short:"CategoriesHeader_logo_short__RT8P_",CategoriesHeader_list:"CategoriesHeader_CategoriesHeader_list__CgMbq",MoreCategories_dropDown:"CategoriesHeader_MoreCategories_dropDown__t_Fqh",MoreCategories_dropDown_arrow:"CategoriesHeader_MoreCategories_dropDown_arrow__llkw_",header_dot:"CategoriesHeader_header_dot__pixyd",Cart_button_withBefore:"CategoriesHeader_Cart_button_withBefore__vafN0",opacityCartBut:"CategoriesHeader_opacityCartBut___THNR",Cart_button:"CategoriesHeader_Cart_button__P6Q09",text_hed:"CategoriesHeader_text_hed__RzxNG",open:"CategoriesHeader_open__2W6Ai",MoreCategories_list:"CategoriesHeader_MoreCategories_list__CkWbK",MoreCategories_list_item:"CategoriesHeader_MoreCategories_list_item__67w1t"}},8811:e=>{e.exports={DishCard:"DishCard_DishCard__K56Uv",DishCard_imgBlock:"DishCard_DishCard_imgBlock__xENw3",titleBlock:"DishCard_titleBlock__9MGio",CardFootBlock:"DishCard_CardFootBlock__46jmd",CardFootBlock__price:"DishCard_CardFootBlock__price__XbNcI",CardFootBlock__stick:"DishCard_CardFootBlock__stick__M85j5",CardFootBlock__button:"DishCard_CardFootBlock__button__IW2km",rowBlock:"DishCard_rowBlock__KVzcB",maxWidthContainer:"DishCard_maxWidthContainer__H5Vkp"}},9421:e=>{e.exports={dishModal:"DishModal_dishModal__HfjIM",dishModal_image:"DishModal_dishModal_image__p8Y24",dishModal_main:"DishModal_dishModal_main__LFcIP",dishModal_main_title:"DishModal_dishModal_main_title__vXGEQ",dishModal_main_description:"DishModal_dishModal_main_description__sGoWd",dishModal_main_subTitle:"DishModal_dishModal_main_subTitle__skq66",dishModal_main_text:"DishModal_dishModal_main_text__PsjQy",dishModal_main_weight:"DishModal_dishModal_main_weight__cXUo5"}}}]);