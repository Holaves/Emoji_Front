(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[50],{5368:(e,t,a)=>{"use strict";a.d(t,{A:()=>g});var i=a(4848),s=a(6540),r=a(9681),n=a.n(r),_=a(8601),c=a(4335);let l="".concat(_.Jc,"/cart"),d=async e=>(await c.A.get(l,{headers:{Authorization:"Bearer ".concat(e)}})).data,o=async(e,t)=>(await c.A.delete("".concat(l),{headers:{Authorization:"Bearer ".concat(e)},data:{DishId:t}})).data,h=async(e,t)=>(await c.A.put("".concat(l,"/quantity/increment"),{DishId:t},{headers:{Authorization:"Bearer ".concat(e)}})).data,m=async(e,t)=>(await c.A.put("".concat(l,"/quantity/decrement"),{DishId:t},{headers:{Authorization:"Bearer ".concat(e)}})).data,u=e=>{let{item:t,onUpdateQuantity:a,onRemove:r,isOrder:c=!1}=e,[l,d]=(0,s.useState)(t.quantity),o=async()=>{if(l>1){let e=l-1;d(e),a(t.dish._id,e);let i=localStorage.getItem("jwtToken");if(i)try{await m(i,String(t.dish._id))}catch(e){console.error("Ошибка при уменьшении количества:",e)}}else x()},u=async()=>{let e=l+1;d(e),a(t.dish._id,e);let i=localStorage.getItem("jwtToken");if(i)try{await h(i,String(t.dish._id))}catch(e){console.error("Ошибка при увеличении количества:",e)}},x=()=>{r(t.dish._id)};return(0,i.jsx)("div",{className:n().CartItem,children:(0,i.jsxs)("div",{className:n().CartItem_wrapper,children:[(0,i.jsx)("div",{className:n().CartItem_img_cont,children:(0,i.jsx)("img",{src:"".concat(_.Jc,"/").concat(t.dish.picture),alt:t.dish.name})}),(0,i.jsxs)("div",{className:n().CartItem_block,children:[(0,i.jsxs)("div",{className:n().CartItem_block_title,children:[(0,i.jsx)("h3",{children:t.dish.name}),(0,i.jsxs)("div",{className:n().CartItem_Counter,style:c?{width:"45px"}:{},children:[!c&&(0,i.jsx)("div",{className:n().decrement,onClick:o,children:(0,i.jsx)("div",{className:n().decrement_first})}),(0,i.jsx)("div",{className:n().counter_text,style:c?{display:"flex",justifyContent:"center",width:"100%"}:{},children:l}),!c&&(0,i.jsxs)("div",{className:n().increment,onClick:u,children:[(0,i.jsx)("div",{className:n().increment_first}),(0,i.jsx)("div",{className:n().increment_second})]})]})]}),(0,i.jsxs)("h2",{className:n().CartBlock_subTitle,children:[t.dish.weight," грамм"]}),(0,i.jsx)("div",{className:n().CartBlock_line}),(0,i.jsxs)("div",{className:n().CartBlock_bot,children:[(0,i.jsxs)("h4",{className:n().CartBlock_price,children:[t.dish.price*l," рублей"]}),c?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)("div",{className:n().dropDish,onClick:x})]})]})]})})};var x=a(9377),v=a(8787),p=a.n(v),C=a(4619),j=a(6715);let g=e=>{let{isOpenModal:t,isOrder:a=!1,cart:r}=e,[n,_]=(0,s.useState)(r||[]),[c,l]=(0,s.useState)(!1),[h,m]=(0,s.useState)(0),[v,g]=(0,s.useState)(1440),B=(0,j.useRouter)();(0,s.useEffect)(()=>{let e=setInterval(async()=>{let e=localStorage.getItem("jwtToken");if(!r){if(e)try{let t=await d(e);_(t.dishes)}catch(e){console.error("Ошибка при периодической загрузке корзины:",e)}else _((0,C.Xl)().dishes)}},2500);return()=>{clearInterval(e)}},[]);let y=async e=>{let t=localStorage.getItem("jwtToken");if(t)try{await o(t,String(e))}catch(e){console.error("Ошибка при удалении блюда:",e)}let a=n.filter(t=>t.dish._id!==e);_(a),localStorage.setItem("cart",JSON.stringify({dishes:a,isDelive:!1}))};(0,s.useEffect)(()=>{g(window.innerWidth),addEventListener("resize",e=>{g(window.innerWidth)})},[]),(0,s.useEffect)(()=>{t?l(!0):setTimeout(()=>l(!1),500)},[t]),(0,s.useEffect)(()=>{0===h&&m(1)},[]);let k=(e,t)=>{if(t<=0){y(e);return}let a=n.map(a=>a.dish._id===e?{...a,quantity:t}:a);_(a),localStorage.setItem("cart",JSON.stringify({dishes:a,isDelive:!1}))};return c?(0,i.jsxs)("div",{className:"".concat(a?p().Cart_order:p().Cart," ").concat(t?p().show:p().hide),children:[!a&&(0,i.jsx)("h2",{className:p().Cart_title,children:"Корзина"}),(0,i.jsx)("div",{className:p().Cart_scroll_text,children:0===n.length?(0,i.jsx)("p",{children:"Ваша корзина пуста"}):n.map((e,t)=>(0,i.jsx)(u,{isOrder:a,item:e,onUpdateQuantity:k,onRemove:y},t))}),(0,i.jsxs)("div",{className:p().Cart_botBlock,children:[(0,i.jsx)("h3",{children:0===n.length?(0,i.jsx)("div",{children:"0 товаров"}):(0,i.jsxs)("div",{children:[n.length," ",n.length>1?"товара":"товар"]})}),(0,i.jsxs)("div",{className:p().Cart_botBlock_sum,children:[(0,i.jsx)("h2",{children:"Общая сумма:"}),(0,i.jsxs)("h4",{children:[n.reduce((e,t)=>e+t.dish.price*t.quantity,0)," ","руб"]})]}),!a&&(0,i.jsx)(x.A,{state:x.m.active,width:v>1520?547:v>1440?430:400,height:v>1440?75:55,fz:v>1520?"":v>1440?"28px":"26px",styless:{margin:"0px auto",marginTop:"20px"},onClickBut:()=>B.push("/orderPage"),children:"Оформить заказ"})]})]}):null}},5820:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var i=a(4848);a(6540);var s=a(2163),r=a.n(s);let n=e=>{let{children:t,styless:a}=e;return(0,i.jsx)("div",{className:r().ContainerA,style:a,children:t})}},9491:(e,t,a)=>{"use strict";a.d(t,{A:()=>y});var i=a(4848),s=a(6540),r=a(5820),n=a(1357),_=a.n(n),c=a(9377),l=a(726),d=a(6424),o=a(5733),h=a.n(o);let m=e=>{let{}=e,t=(0,d.useRouter)();return(0,i.jsxs)("div",{className:h().autorization,children:[(0,i.jsx)("h1",{children:"Авторизация"}),(0,i.jsx)("h5",{style:{fontSize:"26px"},children:"Войдите с помощью номера телефона, используя Нашего Telegram-бота"}),(0,i.jsx)(c.A,{state:c.m.active,width:636,height:102,styless:{marginTop:"52px"},onClickBut:()=>{window.open("https://t.me/EmojiAuth_bot","_blank")},children:"Перейти в Telegram"}),(0,i.jsxs)("h5",{children:["Продолжая, вы соглашаетесь",(0,i.jsx)("a",{onClick:()=>t.push("/privacy"),children:" со сбором и обработкой персональных данных и пользовательским соглашением"})]})]})};var u=a(8601),x=a(6715),v=a(107),p=a.n(v);let C=e=>{let{categories:t,isOpen:a}=e,[r,n]=(0,s.useState)(!1),_=t.slice(0,4),c=t.slice(4);return a?(0,i.jsx)("div",{className:p().BurgerMenu,children:(0,i.jsx)("div",{className:p().BurgerMenu_wrapper,children:(0,i.jsxs)("ul",{children:[r?c.map((e,t)=>(0,i.jsx)("li",{children:e.subName},t)):_.map((e,t)=>(0,i.jsx)("li",{children:e.subName},t)),(0,i.jsx)("li",{onClick:()=>n(!r),children:r?(0,i.jsx)(i.Fragment,{children:"Свернуть категории"}):(0,i.jsx)(i.Fragment,{children:"Еще категории"})}),(0,i.jsx)("li",{style:{color:"green"},children:"Ватцап"}),(0,i.jsx)("li",{children:"Акции"})]})})}):(0,i.jsx)(i.Fragment,{})};var j=a(1106),g=a.n(j),B=a(5368);let y=e=>{let{order:t=!1,onChangeDeliveType:a,categories:n}=e,[d,o]=(0,s.useState)(!1),[h,v]=(0,s.useState)(!0),[p,j]=(0,s.useState)(!1),[y,k]=(0,s.useState)(null),[N,b]=(0,s.useState)(1e3),[w,I]=(0,s.useState)(!0),[f,A]=(0,s.useState)(!1),[T,S]=(0,s.useState)(!1),[H,M]=(0,s.useState)(!1),W=()=>{A(!f)},L=(0,x.useRouter)(),O=async()=>{let e=localStorage.getItem("jwtToken");if(e)try{let t=await fetch("".concat(u.Jc,"/check/"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok){await t.json();return}let a=await t.json();a.phone_number&&k(a),j(!0)}catch(e){console.error("Ошибка доступа:",e)}};(0,s.useEffect)(()=>{b(window.innerWidth),addEventListener("resize",e=>{b(window.innerWidth)})},[]);let z=()=>{A(!1),N>800?(v(!1),setTimeout(()=>{v(!0),o(!d)},1e3)):S(!T)};return(0,s.useEffect)(()=>{O()},[]),(0,i.jsx)("nav",{className:h?_().header:_().header_disabled,children:(0,i.jsx)(r.A,{styless:{display:"flex",alignContent:"center",justifyContent:"center"},children:(0,i.jsxs)("div",{className:_().headerWrapper,children:[d?(0,i.jsxs)("div",{className:_().headerMainTwo,children:[(0,i.jsxs)("div",{className:_().headerList,children:[(0,i.jsxs)("div",{className:_().headerList_list,children:[(0,i.jsx)("li",{children:(0,i.jsx)("a",{style:{textDecoration:"none"},href:"https://yandex.ru/maps/org/emodzi/5950025613/reviews/?ll=37.442145%2C45.262077&tab=reviews&z=17.4",children:"Отзывы"})}),(0,i.jsx)("li",{onClick:()=>L.push("/stocks"),children:"Акции"}),(0,i.jsx)("li",{onClick:()=>L.push("/Contacts"),children:"Контакты"}),(0,i.jsx)("li",{id:_().telephone_num,children:"+7(900)00-000-00"})]}),(0,i.jsxs)("div",{className:_().headerList_buttons,children:[(0,i.jsx)("div",{className:_().headerList_buttons_WhatsApp,children:(0,i.jsx)("div",{className:_().WhatsApp_Icon_gray})}),(0,i.jsx)(g(),{href:"https://vk.com/emojer27",className:_().headerList_buttons_Vk,children:(0,i.jsx)("div",{className:_().Vk_icon_gray})})]})]}),(0,i.jsxs)("div",{className:_().headerButtonsBlock,children:[p?(0,i.jsx)("div",{style:{marginRight:"20px"},id:_().telephone_numb,children:null==y?void 0:y.phone_number}):(0,i.jsx)("div",{className:_().log_in_button,onClick:()=>M(!0),children:"Войти"}),(0,i.jsx)(l.A,{isOpen:H,onClose:()=>M(!1),width:903,children:(0,i.jsx)(m,{})}),(0,i.jsx)("div",{className:_().header_cart_icon,onClick:W,style:{marginRight:0}}),(0,i.jsx)(B.A,{isOpenModal:f}),(0,i.jsxs)("div",{className:_().headerChangeButton_active,onClick:z,children:[(0,i.jsx)("span",{className:_().headerChangeButton_item_active,id:_().changeButton_item_first}),(0,i.jsx)("span",{className:_().headerChangeButton_item_active,id:_().changeButton_item_second}),(0,i.jsx)("span",{className:_().headerChangeButton_item_active,id:_().changeButton_item_three})]})]})]}):(0,i.jsxs)("div",{className:_().headerMainOne,children:[(0,i.jsx)("div",{className:_().logoFull,onClick:()=>L.push("/")}),t?(0,i.jsxs)("div",{className:_().deliveType_block,children:[(0,i.jsx)("div",{className:w?_().deliveType_delive_active:_().deliveType_delive,onClick:()=>{I(!0),a?a(!0):console.log("")},children:(0,i.jsx)("h3",{children:"Доставка"})}),(0,i.jsx)("div",{className:_().deliveType_block_stick}),(0,i.jsx)("div",{className:w?_().deliveType_samo:_().deliveType_samo_active,onClick:()=>{I(!1),a?a(!1):console.log("")},children:(0,i.jsx)("h3",{children:"Самовывоз"})})]}):N>=600?(0,i.jsx)(c.A,{isAnimation:!0,state:c.m.active,width:N>970?504:360,height:N>1440?59:52,children:(0,i.jsx)(g(),{className:_().anchor,href:"/#anchor_two",children:"Сделать заказ"})}):(0,i.jsx)(i.Fragment,{}),(0,i.jsxs)("div",{className:_().headerButtonContainer,children:[t?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)("div",{className:_().header_cart_icon,onClick:W}),(0,i.jsx)(B.A,{isOpenModal:f}),(0,i.jsxs)("div",{className:_().headerChangeButton,onClick:z,children:[(0,i.jsx)("span",{className:_().headerChangeButton_item,id:_().changeButton_item_first}),(0,i.jsx)("span",{className:_().headerChangeButton_item,id:_().changeButton_item_second}),(0,i.jsx)("span",{className:_().headerChangeButton_item,id:_().changeButton_item_three})]})]})]}),(0,i.jsx)(C,{isOpen:T,categories:n||[]})]})})})}},9377:(e,t,a)=>{"use strict";a.d(t,{A:()=>_,m:()=>n});var i=a(4848);a(6540);var s=a(7567),r=a.n(s),n=function(e){return e.disabled="disabled",e.active="active",e}({});let _=e=>{let{children:t,state:a,isAnimation:s,width:n=400,height:_=68,styless:c,onClickBut:l,fz:d}=e;return(0,i.jsx)("button",{className:"active"===a&&!0===s?r().Button_animation_active:"disabled"===a?r().Button_disabled:"active"===a?r().Button_active:void 0,style:{...c,maxWidth:"".concat(n,"px"),height:"".concat(_,"px"),cursor:"disabled"===a?"not-allowed":"pointer","--hover-max-width":"".concat(n+n/10,"px")},onClick:"active"===a&&l?l:void 0,disabled:"disabled"===a,children:(0,i.jsx)("h4",{style:{fontSize:d&&d},children:t})})}},4619:(e,t,a)=>{"use strict";a.d(t,{Xl:()=>i,bE:()=>s,sX:()=>r});let i=()=>{let e=localStorage.getItem("cart");return e?JSON.parse(e):{dishes:[],isDelive:!1}},s=e=>{let t=i(),a=t.dishes.find(t=>t.dish._id===e._id);a?a.quantity+=1:t.dishes.push({dish:e,quantity:1}),localStorage.setItem("cart",JSON.stringify(t))},r=()=>{localStorage.removeItem("cart")}},7567:e=>{e.exports={Button_animation_active:"Button_Button_animation_active__PqYcf",Button_active:"Button_Button_active__6ApmN",Button_disabled:"Button_Button_disabled__I7GQC"}},5733:e=>{e.exports={autorization:"AutorizationWindow_autorization__P2jn_"}},107:e=>{e.exports={BurgerMenu:"BurgerMenu_BurgerMenu__ElaHW",BurgerMenu_wrapper:"BurgerMenu_BurgerMenu_wrapper__3UJ_6"}},9681:e=>{e.exports={CartItem:"CartItem_CartItem__dtMWv",CartItem_wrapper:"CartItem_CartItem_wrapper__Lfgp1",CartItem_img_cont:"CartItem_CartItem_img_cont__eRegn",CartItem_block_title:"CartItem_CartItem_block_title__QJNcB",CartItem_Counter:"CartItem_CartItem_Counter__iCOsV",increment:"CartItem_increment__zNs0l",increment_first:"CartItem_increment_first__D025u",increment_second:"CartItem_increment_second__to9av",decrement:"CartItem_decrement__2BsZR",decrement_first:"CartItem_decrement_first__Sspc3",counter_text:"CartItem_counter_text__5ATA7",CartBlock_subTitle:"CartItem_CartBlock_subTitle__d5Z7V",CartBlock_line:"CartItem_CartBlock_line__k4YMX",CartBlock_bot:"CartItem_CartBlock_bot__ONMkm",CartBlock_price:"CartItem_CartBlock_price___awk7",dropDish:"CartItem_dropDish__PUHAy"}},8787:e=>{e.exports={Cart:"Cart_Cart__ToWvy",show:"Cart_show__3I7kW",openCart:"Cart_openCart__mgwEY",hide:"Cart_hide__pPgUi",closeCart:"Cart_closeCart__wsbu5",Cart_title:"Cart_Cart_title__y1fdb",Cart_botBlock:"Cart_Cart_botBlock__8qjYs",Cart_botBlock_sum:"Cart_Cart_botBlock_sum__5ct9M",Cart_scroll_text:"Cart_Cart_scroll_text__u6yP0"}},2163:e=>{e.exports={ContainerA:"ContainerA_ContainerA__MCVMB"}},1357:e=>{e.exports={header:"Header_header__uWoDT",headerMainOneShow:"Header_headerMainOneShow__Htldj",header_disabled:"Header_header_disabled__wVJ3f",headerMainOneHide:"Header_headerMainOneHide__C07y5",headerWrapper:"Header_headerWrapper__pWIIv",headerMainOne:"Header_headerMainOne__o_YDn",logoFull:"Header_logoFull__7iecC",buyButton:"Header_buyButton__NGo19",headerChangeButton:"Header_headerChangeButton__2S_wA",headerChangeButton_item:"Header_headerChangeButton_item__PNePA",headerButtonContainer:"Header_headerButtonContainer__AZ7cc",headerMainTwo:"Header_headerMainTwo__NIDu9",headerList:"Header_headerList__QAGjp",headerList_list:"Header_headerList_list__ga_mx",headerList_buttons:"Header_headerList_buttons__KUviG",headerList_buttons_WhatsApp:"Header_headerList_buttons_WhatsApp__DAjBJ",headerList_buttons_Vk:"Header_headerList_buttons_Vk__TfiTl",WhatsApp_Icon_gray:"Header_WhatsApp_Icon_gray__oLxG7",Vk_icon_gray:"Header_Vk_icon_gray__wjg6p",log_in_button:"Header_log_in_button__Uuqhr",headerChangeButton_active:"Header_headerChangeButton_active__ObOMl",headerChangeButton_item_active:"Header_headerChangeButton_item_active__mNIx3",headerButtonsBlock:"Header_headerButtonsBlock__W8g_1",anchor:"Header_anchor__9Q2Mf",deliveType_delive_active:"Header_deliveType_delive_active__cxGLe",deliveType_delive:"Header_deliveType_delive__Tzy7_",deliveType_samo_active:"Header_deliveType_samo_active__mbGm4",deliveType_samo:"Header_deliveType_samo__5SBq_",deliveType_block_stick:"Header_deliveType_block_stick__1c22t",deliveType_block:"Header_deliveType_block__pc_5y",header_cart_icon:"Header_header_cart_icon__aoEmy",telephone_numb:"Header_telephone_numb__yeGd1"}}}]);